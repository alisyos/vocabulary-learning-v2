# 🎓 학습 지문 및 문제 생성 시스템

AI를 활용하여 교육과정 기반의 맞춤형 학습 지문과 문제를 생성하고, 완전한 콘텐츠 관리 시스템을 제공하는 프로덕션급 웹 애플리케이션입니다.

> **현재 상태**: 프로덕션 배포 완료 ✅ | MVP 완성 + 운영 단계

## 🌟 주요 특징

### 🚀 **완전한 7단계 콘텐츠 생성 워크플로우**
체계적인 지문 생성부터 최종 저장까지의 완전 자동화된 프로세스

### 🗄️ **Supabase PostgreSQL 고성능 데이터베이스**
Google Sheets에서 완전 전환하여 관계형 데이터베이스의 모든 장점 활용

### 🎯 **교육과정 기반 맞춤형 생성**
- **학년별 대상**: 초등 중/고학년, 중학생
- **과목/영역**: 사회(4개), 과학(4개) 총 8개 영역
- **🆕 다양한 지문 유형**: 설명문, 논설문, 탐구문, 뉴스 기사, 인터뷰, 동화, 시, 대본, 소설
- **🆕 지문 길이 옵션**: 매우 짧음 ~ 매우 김 (5단계)

### 📊 **통합 콘텐츠 관리 시스템**
- **관리 대시보드**: 스마트 필터링, 페이지네이션, 통계 대시보드
- **4탭 편집 시스템**: 지문/어휘/어휘문제/종합문제 독립적 편집
- **실시간 저장**: 모든 변경사항 즉시 반영
- **상태 관리**: 검수 전 ↔ 검수완료 워크플로우

### 🧠 **고도화된 문제 생성 시스템**
- **어휘 문제**: 개념어 기반 5지선다 (8-10개)
- **종합 문제**: 4가지 유형별 세트 관리 시스템
  - 단답형, 순서맞추기, 요약하기, 핵심어찾기
  - 기본문제 + 보완문제 2개 = 1세트 구조

### 🔐 **사용자 인증 시스템**
HTTP-Only 쿠키 기반 보안 세션 관리 (8개 계정)

## 🔄 7단계 워크플로우

### 1️⃣ **지문 생성** - 교육과정 기반 입력
- 계층적 선택: 구분 → 과목 → 학년 → 영역 → 주제
- **🆕 지문 유형 선택**: 9가지 유형 (설명문, 논설문 등)
- **🆕 길이 옵션**: 5단계 길이 선택
- GPT-4 기반 맞춤형 지문 자동 생성

### 2️⃣ **지문 검토** - 실시간 편집
- 제목, 본문 단락별 실시간 편집
- 개념어 추가/수정/삭제
- 단락 구조 조정

### 3️⃣ **어휘 문제 생성** - 개념어 기반
- 지문 개념어 자동 추출
- 각 용어별 5지선다 문제 생성
- 의미, 사용법, 맥락 평가

### 4️⃣ **어휘 문제 검토** - 개별 편집
- 문제, 선택지, 정답, 해설 개별 편집
- 드롭다운 정답 선택 시스템
- 문제별 추가/삭제 기능

### 5️⃣ **종합 문제 생성** - 4가지 유형
- **단답형**, **순서맞추기**, **요약하기**, **핵심어찾기**
- Random 선택 또는 특정 유형 선택
- 세트 단위 자동 생성

### 6️⃣ **종합 문제 검토** - 세트 관리
- **혁신적 세트 구조**: 기본문제 1개 + 보완문제 2개
- 시각적 구분 (색상 코딩)
- 세트 단위 추가/삭제

### 7️⃣ **최종 저장** - Supabase 트랜잭션
- PostgreSQL 관계형 저장
- 로컬 JSON 백업
- 완전한 데이터 무결성 보장

## 📊 콘텐츠 관리 시스템

### 🏠 **관리 대시보드** (`/manage`)

#### 📈 **5개 통계 카드**
- 총 콘텐츠 세트 수
- 어휘 용어 수 (전체 합계)
- 어휘 문제 수
- 종합 문제 수  
- 총 문제 수

#### 🔍 **스마트 필터링**
- 과목별: 사회, 과학
- 학년별: 3-6학년, 중1-3학년
- 영역별: 8개 세부 영역
- 키워드 검색: 제목/주제/키워드 통합 검색

#### 📄 **페이지네이션**
- 20/50/100개 선택 가능
- 스마트 페이지 네비게이션
- 총 데이터 수 및 범위 표시

### 🛠️ **상세 편집 시스템** (`/manage/[setId]`)

#### **4탭 구조**로 완전한 편집 환경
- **📄 지문 탭**: 제목 및 단락별 실시간 편집
- **📚 어휘 탭**: 용어/정의/예시문장 3필드 구조
- **❓ 어휘문제 탭**: 5지선다 문제별 상세 편집
- **🧠 종합문제 탭**: 세트 단위 문제 관리

## 🛠️ 기술 스택

### **Frontend**
- **Next.js 15.4.1** (App Router) + **React 19.1.0**
- **TypeScript 5** (100% 타입 안전성)
- **Tailwind CSS 4** (반응형 UI)

### **Backend**
- **Next.js API Routes** (서버리스 함수)
- **OpenAI GPT-4 API** (콘텐츠 생성 엔진)

### **Database**
- **Supabase PostgreSQL** ✅ **완전 전환 완료**
- 관계형 7테이블 구조
- 실시간 데이터 동기화

### **Authentication**
- **React Context** + **HTTP-Only 쿠키**
- **XSS 방지** 보안 설계

### **Deployment**
- **Vercel** 프로덕션 배포 완료 ✅
- **Node.js 18.0+** (Turbopack 개발 서버)

## 🗄️ 데이터베이스 구조

### **Supabase PostgreSQL** - 메인 데이터베이스

#### **7개 정규화된 테이블 구조**

1. **`content_sets`** - 콘텐츠 기본 정보 (UUID 기반)
2. **`passages`** - 지문 데이터 (최대 10개 단락)
3. **`vocabulary_terms`** - 어휘 용어 및 정의
4. **`vocabulary_questions`** - 5지선다 어휘 문제
5. **`comprehensive_questions`** - 종합 문제 (세트 구조)
6. **`system_prompts`** - AI 프롬프트 관리
7. **`ai_generation_logs`** - 생성 로그 및 통계

### **데이터베이스 장점**
- **성능 최적화**: JSON 파싱 없이 구조화된 데이터 직접 조회
- **확장성**: PostgreSQL의 모든 기능 활용
- **데이터 무결성**: 관계형 구조로 일관성 보장
- **관리 편의성**: 각 데이터 유형별 독립적 관리

## 🚀 설치 및 실행

### 1. **의존성 설치**
```bash
npm install
```

### 2. **환경 변수 설정** (`.env.local`)
```env
# Supabase Configuration (메인 데이터베이스)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# OpenAI API
OPENAI_API_KEY=your_openai_api_key_here
```

### 3. **개발 서버 실행**
```bash
npm run dev
# → http://localhost:3000
```

### 4. **프로덕션 빌드**
```bash
npm run build
npm start
```

## 🌐 API 엔드포인트 (18개)

### **📝 콘텐츠 생성 API**
- `POST /api/generate-passage` - 지문 생성
- `POST /api/generate-vocabulary` - 어휘 문제 생성  
- `POST /api/generate-comprehensive` - 종합 문제 생성

### **💾 데이터 관리 API**
- `POST /api/save-final-supabase` - 최종 저장
- `GET /api/get-curriculum-data-supabase` - 콘텐츠 조회
- `POST /api/update-status` - 상태 업데이트
- `DELETE /api/delete-set` - 콘텐츠 삭제

### **🎛️ 시스템 관리 API**
- `GET/POST /api/prompts/**` - 프롬프트 관리
- `GET/POST /api/curriculum-admin/**` - 교육과정 관리

### **🔐 인증 API**
- `POST /api/auth/{login|logout|session}` - 사용자 인증

### **🛠️ 유틸리티 API**
- `/api/setup-supabase-schema` - 스키마 생성
- `/api/migrate-*` - 마이그레이션 도구

## 📱 주요 페이지

### **🏠 메인 워크플로우** (`/`)
7단계 콘텐츠 생성의 중심 허브

### **🔐 로그인** (`/login`)
사용자 인증 및 세션 관리

### **📊 콘텐츠 관리** (`/manage`)
통합 관리 대시보드 + 통계

### **🛠️ 상세 편집** (`/manage/[setId]`)
4탭 완전 편집 시스템

### **🎛️ 프롬프트 관리** (`/prompts`)
AI 프롬프트 실시간 관리

### **⚙️ 교육과정 관리** (`/curriculum-admin`)
교육과정 데이터 관리

## 📈 현재 구현 상태 (2025년 1월)

### ✅ **완료된 핵심 기능**
1. **🔄 7단계 콘텐츠 생성 워크플로우** - 완전 구현
2. **🗄️ Supabase PostgreSQL 완전 전환** - 성능 향상
3. **📱 반응형 UI/UX** - 모바일/데스크톱 최적화
4. **🔐 사용자 인증 시스템** - 보안 세션 관리
5. **📝 프롬프트 관리 시스템** - DB 기반 동적 수정
6. **📊 콘텐츠 관리 대시보드** - 완전한 CRUD
7. **🎯 교육과정 기반 생성** - 맞춤형 콘텐츠
8. **🆕 지문 유형/길이 다양화** - 9가지 유형, 5단계 길이

### 📈 **기술적 성취**
- **타입 안전성**: 100% TypeScript 적용
- **성능 최적화**: 구조화된 데이터 활용
- **확장성**: 관계형 DB 설계
- **보안**: XSS 방지, 환경변수 관리
- **배포**: Vercel 프로덕션 완료

## 🔮 향후 개선 계획

### **우선순위 1단계**
1. **🖼️ 이미지/시각자료 지원** - AI 이미지 생성 통합
2. **👥 사용자 역할 관리** - 관리자/교사/학생 권한
3. **📊 데이터 분석 대시보드** - 사용량 통계

### **우선순위 2단계**
4. **🚀 성능 최적화** - 캐싱, 페이지네이션 고도화
5. **🧪 테스트 시스템** - 단위/통합 테스트
6. **🔍 고급 검색** - AI 기반 추천 시스템

### **장기 계획**
7. **📱 모바일 앱** - React Native 또는 PWA

## 📊 생성 결과물

### **완성된 학습 콘텐츠 세트**
- **지문**: 제목 + 다단락 + 개념어 설명
- **어휘 문제**: 용어당 5지선다 (8-10개)
- **종합 문제**: 4유형 세트 구조 (12개 세트)
- **총 문제**: 평균 30-40개 문제
- **해설**: 모든 문제에 상세 해설 포함

### **교육과정 적합성**
- 학년별 어휘 수준 자동 조절
- 교육과정 기준 주제 연계
- 실생활 맥락 포함
- 단계적 난이도 구성

## 🎯 활용 방법

### **👨‍🏫 교육자**
- 교육과정 맞춤 학습 자료 생성
- 개별화된 문제 제작
- 학습 진도 관리

### **👨‍🎓 학습자**
- 체계적 문제 해결 학습
- 단계별 이해도 확인
- 자기주도 학습 지원

### **🏢 교육기관**
- 표준화된 학습 자료 관리
- 대량 콘텐츠 효율 생성
- 품질 관리 시스템

## 🎨 디자인 시스템

### **🎨 색상 테마**
- **지문 생성**: 파란색 (`blue-600`)
- **어휘 문제**: 보라색 (`purple-600`)
- **종합 문제**: 초록색 (`green-600`)
- **저장/관리**: 빨간색 (`red-600`)

### **📱 반응형 설계**
- 모바일 우선 설계
- 터치 인터페이스 지원
- 태블릿/데스크톱 최적화

## 🛠️ 시스템 아키텍처

### **데이터 흐름**
1. **사용자 입력** → 교육과정 기반 선택
2. **AI 생성** → GPT-4 + DB 프롬프트
3. **데이터 저장** → Supabase 관계형 저장
4. **조회/편집** → 실시간 데이터 동기화

### **확장성 설계**
- **수평 확장**: Supabase 자동 스케일링
- **모듈식 구조**: 기능별 독립 컴포넌트
- **API 기반**: 마이크로서비스 준비

## 📁 프로젝트 구조

```
src/
├── app/
│   ├── api/                    # API Routes (18개)
│   │   ├── generate-*/         # 콘텐츠 생성 API
│   │   ├── *-supabase/        # 데이터 관리 API
│   │   ├── auth/              # 인증 API
│   │   └── prompts/           # 프롬프트 관리 API
│   ├── manage/                # 콘텐츠 관리 시스템
│   ├── prompts/               # 프롬프트 관리
│   ├── curriculum-admin/      # 교육과정 관리
│   ├── login/                 # 로그인
│   └── page.tsx               # 메인 워크플로우
├── components/                # 주요 컴포넌트 (8개)
│   ├── AuthGuard.tsx         # 인증 보호
│   ├── Header.tsx            # 공통 헤더
│   ├── PassageForm.tsx       # 지문 생성 폼
│   ├── PassageReview.tsx     # 지문 편집
│   ├── VocabularyQuestions.tsx # 어휘 문제
│   ├── ComprehensiveQuestions.tsx # 종합 문제
│   └── FinalSave.tsx         # 최종 저장
├── contexts/                 # React Context
├── lib/                      # 유틸리티
│   ├── supabase.ts          # Supabase 연동
│   ├── openai.ts            # OpenAI 연동
│   └── prompts.ts           # 프롬프트 관리
└── types/                    # TypeScript 타입
```

## 📊 성능 특성

### **최적화 요소**
- **구조화된 데이터**: JSON 파싱 최소화
- **관계형 인덱싱**: PostgreSQL 인덱스 활용
- **컴포넌트 분할**: 필요 부분만 리렌더링
- **자동 캐싱**: Next.js 캐싱 활용

### **확장 가능성**
- **데이터베이스**: Supabase 자동 스케일링
- **서버**: Vercel 서버리스 함수
- **모듈식 아키텍처**: 새 기능 추가 용이

## 📝 라이선스

MIT License

---

## 🎖️ 프로젝트 성과

### **✅ MVP 완성도**
- **7단계 완전 구현**: 지문 생성 → 최종 저장
- **프로덕션 배포**: Vercel 운영 환경
- **완전한 CRUD**: 생성/조회/수정/삭제
- **사용자 인증**: 보안 세션 관리

### **🚀 기술적 우수성**
- **현대적 기술 스택**: Next.js 15 + React 19
- **타입 안전성**: 100% TypeScript
- **고성능 DB**: Supabase PostgreSQL
- **확장 가능한 설계**: 모듈식 아키텍처

### **📈 비즈니스 가치**
- **교육 효율성**: 수동 제작 대비 10배 빠른 콘텐츠 생성
- **품질 일관성**: AI 기반 표준화된 콘텐츠
- **사용성**: 직관적 7단계 워크플로우
- **확장성**: 교육기관 도입 준비 완료

---

**🚀 Supabase PostgreSQL + AI GPT-4 + 7단계 워크플로우로 고품질 교육 콘텐츠를 생성하고 관리하는 프로덕션급 시스템입니다!**

**🎯 현재 프로덕션 운영 중이며, 교육 기관 도입 준비가 완료된 상태입니다.**